<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="SmmCourseViewer">
    <meta name="author" content="Leonardo Mauro <leo.mauro.desenv@gmail.com>">
	<title>SmmCourseViewer - Demonstration</title>

    <!--[if IE]><link rel="shortcut icon" href="layout/favicon.ico"><![endif]-->
    <link rel="icon" href="layout/favicon.png">
    <!-- Bootstrap: https://getbootstrap.com/docs/4.2/ -->
    <link rel="stylesheet" href="layout/css/bootstrap.min.css">
</head>

<body>
<!-- Head -->
<header>
    <div class="collapse bg-dark" id="navbarHeader">
    <div class="container">
        <div class="row">
        <div class="col-sm-8 col-md-7 py-4">
            <h4 class="text-white">About</h4>
          <p class="text-muted">A package to reading courses (*.cdt) from Super Mario Maker game.</p>
        </div>
        <div class="col-sm-4 offset-md-1 py-4">
            <h4 class="text-white">Contact</h4>
            <ul class="list-unstyled">
                <li><a href="https://github.com/leomaurodesenv/smm-course-viewer" target="_blank" class="text-white">GitHub</a></li>
                <li><a href="mailto:leo.mauro.desenv@gmail.com" class="text-white">Email me</a></li>
            </ul>
        </div>
        </div>
    </div>
    </div>
    <div class="navbar navbar-dark bg-dark shadow-sm">
    <div class="container d-flex justify-content-between">
        <a href="#" class="navbar-brand d-flex align-items-center">
            <strong>SmmCourseViewer</strong>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
    </div>
</header>

<!-- Main -->
<main>
<section id="selectFile" class="bg-info text-white" style="padding:15px 0 5px 0;">
    <div class="container">
        <p>Select the Super Mario Maker course file (*.cdt).</p>
        <p>Select: <input type="file" id="inputFile" name="inputFile" accept=".cdt"></p>
    </div>
</section>

<section id="display" class="jumbotron">
    <div class="container">
        <h4>Course Display</h4>
        <span id="courseInfoDisplay"></span>
        <span id="courseDraw"></span>
        <hr>
        <div class="courseDrawMain rounded" style="width:100%;height:320px;overflow:auto;background:none;border:3px solid #17a2b8;">
            <div class="courseDraw" style="width:1200px;margin:0;padding:0;background:none;">
                <div style="display:inline-block;margin:0;width:32px;height:32px;background:url('layout/draw/support/bg-square.png');"></div><div style="display:inline-block;margin:0;width:32px;height:32px;background:url('layout/draw/support/bg-square.png');"></div><div style="display:inline-block;margin:0;width:32px;height:32px;background:url('layout/draw/support/bg-square.png');"></div>
            </div>
        </div>
        
    </div>
    <hr>
    <div class="container">
        <h4>General Code</h4>
        <p class="text-muted">
            In this example, you can access the course data by <b>Browser Console</b> after uploading the file.<br>
            Open <b>Browser Console</b>: Mozilla (Ctrl+Shift+J, or F12), Chrome (Ctrl+Shift+J).<br>
            Type:
        </p>
        <p>
            <code>courseViewer</code> <samp># global variable</samp><br>
            <code>courseViewer.course</code> <samp># course data</samp><br>
            <code>courseViewer.objects</code> <samp># course objects</samp>
        </p>
    </div>
</section>
</main>

<!-- Footer -->
<footer class="text-muted">
    <div class="container">
        <p>Copyright Â© <a href="https://github.com/leomaurodesenv/smm-course-viewer" target="_blank">smm-course-viewer</a> - <a href="https://github.com/leomaurodesenv/" target="_blank">Leonardo Mauro</a></p>
    </div>
</footer>

<!-- Bootstrap 4 -->
<script src="layout/js/jquery.slim.min.js"></script>
<script src="layout/js/bootstrap.min.js"></script>

<!-- SmmCourseViewer -->
<script src="lib/CourseObject.js"></script>
<script src="lib/Course.js"></script>
<script src="lib/SmmCourseViewer.js"></script>
<script>

function alertShow(selector, type, msg) {
    $(selector).append('<div class="alert alert-'+type+' alert-dismissible fade show" role="alert">'+msg+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>');
}

function handleFileSelect(eventFile) {
	/* get file object */
    let file = eventFile.target.files[0];
    alertShow('#selectFile > div:eq(0)', 'success', 'Success: uploaded file!');
	
	/* instance the course viewer */
	courseViewer = new _SmmCourseViewer();
    courseViewer.read(file, function(eventRead) {
        if(eventRead) {
            //console.debug(courseViewer.course);
            alertShow('#display > div:eq(0)', 'info', 'Success.');
            document.getElementById('courseInfoDisplay').innerHTML = courseViewer.course.getHtml();
        }
        else {
            alertShow('#display > div:eq(0)', 'danger', 'Error: corrupted file!');
        }
    });
}


window.onload = function() {
	/* check if browser support File Reader */
	if (window.File && window.FileReader && window.FileList && window.Blob) {
  		console.log('File APIs is fully supported!');
  		document.getElementById('inputFile').addEventListener('change', handleFileSelect, false);
	} else {
		console.log('File APIs are not fully supported in this browser.');
	}
}

</script>
</body>
</html> 